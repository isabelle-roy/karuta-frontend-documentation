---
layout: archive
permalink: /autocreate_en/
title: "Automatic Creation"
sidebar:
 nav: "autocreate_en"
---
<p>
	It is possible to automate the creation of a portfolio upon the fist time a user logs into Karuta. In
	that case, Karuta will executre a batch created by the designer and the specified in the 
	<i>application/js/specific.js</i> file.
</p>
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step1'>Execution Condition</h3>
	<p>
		For the creation batch to execute upon the user's fist connection, the user account must have the 
		Creator	right &mdash; which should be removed at the end of the batch execution. The account must
		also have the <code>xlimited</code> instruction in the field Other.
	</p>
		<img src='../assets/img/autocreate/compte_utilisateur_en.png' width='40%'/>
	<p>
		NOTE: if CAS is used, Karuta automatically creates the user account with the CAS identifier
		as username, and then sets the Creator right and <code>xlimited</code> instruction the field Other.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>

	<h3 id='step1'>Step 1 &mdash; Backend Configuration</h3>
	<p>
		In the backend's <code>configKaruta.properties</code> configuration file, the following values must
		be set:
		<ul>
			<li>casCreateAccount=y</li>
			<li>createAsDesigner=y</li>
		</ul>
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step1'>Step 2 &mdash; Writing the Creation Batch</h3>
	<p>
		The batch must include the instructions to create one or more portfolios for the user and then
		share these portfolios with said user in the desired role. In the end it must also:
	</p>
		<ol>
			<li> remove the user's Creator right;</li>
			<li> unshare the new portfolios from the user in the <i>designer</i> role;</li>
			<li> Change the ownership of the new portfolios to root.</li>
		</ol>
	<p>Automatic creation batch example:</p>
	<img src='../assets/img/autocreate/batch_en.jpg' width='60%'/>
	<p>	Download this batch model <b><a href='../assets/img/autocreate/batch-creation.xml'>here</a></b>.</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step2'>Étape 3 &mdash; Application (Frontend) Configuration</h3>
	<p>
		The creation batch and the global variables it refers to must be specified in the frontend's 
		<code>application/js/specific.js</code> file. Also, the g_execbatch variable on line 3 must be
		set to <i>true</i>.
	</p>
	<img src='../assets/img/autocreate/specific_js.jpg'/>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step3'>Détails du batch de création</h3>
	<!-- --------------------------------------- -->
	<h4>Création du projet Cohorte</h4>
	<p> Dans notre exemple un projet Cohorte sera créé si il n'existe pas déjà.
	Son code et libellé sera la valeur de la vaiable globale défini dans le fichier specific.js (année-mois)
	</p>
	<img src='../assets/img/autocreate/create-project.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Création du portfolio</h4>
	<img src='../assets/img/autocreate/create-tree.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Partage du portfolio</h4>
	<img src='../assets/img/autocreate/share-tree.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Mise à jour des ressources</h4>
	<p>Dans notre modèle de portfolio, il y a le nom, prénom et couriel de l'étudiant.</p>
	<img src='../assets/img/autocreate/update-resources.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Départage du portfolio</h4>
	<img src='../assets/img/autocreate/unshare-portfolio.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Départage du projet</h4>
	<img src='../assets/img/autocreate/unshare-project.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Changement de propiétaire du portfolio</h4>
	<img src='../assets/img/autocreate/setowner-portfolio.jpg'/>
	<!-- --------------------------------------- -->
	<h4>Changement de propiétaire du portfolio</h4>
	<img src='../assets/img/autocreate/setowner-project.jpg'/>
	<!-- --------------------------------------- -->
</article>
