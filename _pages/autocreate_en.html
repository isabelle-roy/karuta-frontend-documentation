---
layout: archive
permalink: /autocreate_en/
title: "Automatic Creation"
sidebar:
 nav: "autocreate_en"
---
<p>
	It is possible to automate the creation of a portfolio upon the fist time a user logs into Karuta. In
	that case, Karuta will executre a batch created by the designer and the specified in the 
	<i>application/js/specific.js</i> file.
</p>
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='condition'>Execution Condition</h3>
	<p>
		For the creation batch to execute upon the user's fist connection, the user account must have the 
		Creator	right &mdash; which should be removed at the end of the batch execution. The account must
		also have the <code>xlimited</code> instruction in the field Other.
	</p>
		<img src='../assets/img/autocreate/compte_utilisateur_en.png' width='50%'/>
	<p>
		NOTE: if CAS is used, Karuta automatically creates the user account with the CAS identifier
		as username, and then sets the Creator right and <code>xlimited</code> instruction the field Other.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>

	<h3 id='step1'>Step 1 &mdash; Backend Configuration</h3>
	<p>
		In the backend's <code>configKaruta.properties</code> configuration file, the following values must
		be set:
		<ul>
			<li>casCreateAccount=y</li>
			<li>createAsDesigner=y</li>
		</ul>
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step2'>Step 2 &mdash; Writing the Creation Batch</h3>
	<p>
		The batch must include the instructions to create one or more portfolios for the user and then
		share these portfolios with said user in the desired role. In the end it must also:
	</p>
		<ol>
			<li> remove the user's Creator right;</li>
			<li> unshare the new portfolios from the user in the <i>designer</i> role;</li>
			<li> Change the ownership of the new portfolios to root.</li>
		</ol>
	<p>Automatic creation batch example:</p>
	<img src='../assets/img/autocreate/batch_en.jpg' width='75%'/>
	<p>
		Download this batch model <b><a href='../assets/img/autocreate/batch-creation.xml'>here</a></b>
		or see the detailed explanation of the model at the bottom of the page.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='step3'>Étape 3 &mdash; Application (Frontend) Configuration</h3>
	<p>
		The creation batch and the variables it refers to must be specified in the frontend's 
		<code>application/js/specific.js</code> file. Also, the g_execbatch variable on line 3 must be
		set to <i>true</i>.
	</p>
	<img src='../assets/img/autocreate/specific_js_en.jpg'/>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='batchDetails'>Creation Batch Details (from Step 2)</h3>
	<h4>Creation of a project for the cohort</h4>
	<p>
		
		
		Dans notre exemple un projet pour la cohorte sera créé si il n'existe pas déjà. Son code et 
		son libellé seront la valeur de la variable globale définie dans le fichier <i>specific.js</i>
		(année-mois du système).
	</p>
	<img src='../assets/img/autocreate/create-project.jpg'/>

	<h4>Création du portfolio de l'utilisateur</h4>
	<img src='../assets/img/autocreate/create-tree.jpg'/>

	<h4>Partage du portfolio avec l'utilisateur dans le bon rôle</h4>
	<img src='../assets/img/autocreate/share-tree.jpg'/>

	<h4>Mise à jour des ressources profil dans le portfolio</h4>
	<p>Dans notre modèle de portfolio, il y a le nom, prénom et couriel de l'étudiant.</p>
	<img src='../assets/img/autocreate/update-resources.jpg'/>

	<h4>Départage du portfolio d'avec l'étudiant dans le rôle <i>designer</i></h4>
	<p>
		Le création du portfolio par l'étudiant en avait fait le designer. Or l'étudiant ne doit pas
		avoir plus d'un rôle dans son portfolio.
	</p>
	<img src='../assets/img/autocreate/unshare-portfolio.jpg'/>

	<h4>Départage du projet cohorte d'avec l'étudiant dans le rôle <i>designer</i></h4>
	<img src='../assets/img/autocreate/unshare-project.jpg'/>

	<h4>Changement de propiétaire du portfolio pour root</h4>
	<p>Idem point précédent&nbsp;: la création du portfolio par l'étudiant en avait fait le propriétaire.</p>
	<img src='../assets/img/autocreate/setowner-portfolio.jpg'/>

	<h4>Changement de propiétaire du projet cohorte pour root</h4>
	<img src='../assets/img/autocreate/setowner-project.jpg'/>
</article>
